{% extends 'layout/basic.html' %}
{% load static %}

{% block title %}个人详情页{% endblock %}
{% block css %}
<style>
    .logo{
    width: 150px;
    height: 150px;
    }
img.logo1{
    width: 150px;
    height: 150px;
    border-style: solid;
    border-color: black;
    border-width: 4px;
    }
</style>
{% endblock %}

{% block content %}
    <h1>{{ user.username }}</h1>
    <div class='logo'>
        {% if request.user.head_portrait %}
        <img class='logo1' src='{{ user.head_portrait.url }}'>
        {% else %}
        <img class='logo1' src="{% static 'img/default.jpg' %}">
        {% endif %}
    </div>
    {% if request.user.power == 4 or request.user.power == 3 %}
      <a href="{% url 'web:change_power' user.id %}">修改权限</a>
    {% endif %}
    <h4>他关注的版块</h4>
    {% for concerned in user.usertoforum_set.all %}
    {% if concerned.status == 1 %}
    <div id='concerned_{{ concerned.forum.id }}'>
        <a  href="{% url 'web:forum' concerned.forum.id %}">{{ concerned.forum }}</a>
    </div>
    {% endif %}
    {% endfor %}
    
    
{% endblock %}

{% block js %}
    <script>
         function unConcerned(id) {
            var pk = id
            var url = '/unconcerned/' + pk + '/'
            $.ajax({
                url: url,
                type: "POST",
                success: function (res) {
                    if(res.status){
                    $('#concerned_'+id).remove();
                    }
                }
            })
        }
    </script>
{% endblock %}